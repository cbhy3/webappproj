
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tossed Out Admin Page</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
    .btn-custom {
      background: linear-gradient(45deg, #6a11cb, #2575fc);
      color: white;
      border: none;
      border-radius: 50px;
      padding: 12px 30px;
      font-size: 16px;
      font-weight: bold;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s, box-shadow 0.2s;
        margin-top: 15px;
    }
    .btn-custom:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 12px rgba(0, 0, 0, 0.2);
        color:white;
    }
    .btn-custom:active {
      transform: translateY(1px);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }


  </style>
</head>
<body>
<script>
    function update_action(action){
        fetch('updateadminaction', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                new_action: action
            })
        })
    .then(response => response.json())
    .then(data => console.log(data))
    .catch(error => console.error('Error:', error));
        setTimeout(function(){
            location.reload();
        },50)
    }
</script>
<div class="container mt-5">
     {% if action == 'Default' %}
        <button class="btn btn-custom" onclick = "update_action('AddProduct')">Add Product</button>
        <br>
        <button class="btn btn-custom" onclick = "update_action('ModifyProduct')">Modify/ Delete Product</button>
        <br>
     {% elif action == 'AddProduct' %}
    <h1 class="mb-4">Add Product</h1>
    <form method="POST">
        {{ add_product.hidden_tag() }}

        <div class="mb-3">
            {{ add_product.name.label(class="form-label") }}
            {{ add_product.name(class="form-control", placeholder="Enter product name") }}
            {% if add_product.name.errors %}
                <div class="text-danger">
                    {{ add_product.name.errors[0] }}
                </div>
            {% endif %}
        </div>

        <div class="mb-3">
            {{ add_product.price.label(class="form-label") }}
            {{ add_product.price(class="form-control", placeholder="Enter product price") }}
            {% if add_product.price.errors %}
                <div class="text-danger">
                    {{ add_product.price.errors[0] }}
                </div>
            {% endif %}
        </div>

        <div class="mb-3">
            {{ add_product.quantity.label(class="form-label") }}
            {{ add_product.quantity(class="form-control", placeholder="Enter product quantity") }}
            {% if add_product.quantity.errors %}
                <div class="text-danger">
                    {{ add_product.quantity.errors[0] }}
                </div>
            {% endif %}
        </div>

        <div class="mb-3">
            {{ add_product.categories.label(class="form-label") }}
            {{ add_product.categories(class="form-select") }}
            {% if add_product.categories.errors %}
                <div class="text-danger">
                    {{ add_product.categories.errors[0] }}
                </div>
            {% endif %}
        </div>

        <div class="mb-3">
            {{ add_product.image_url.label(class="form-label") }}
            {{ add_product.image_url(class="form-control", placeholder="Enter image URL") }}
            {% if add_product.image_url.errors %}
                <div class="text-danger">
                    {{ add_product.image_url.errors[0] }}
                </div>
            {% endif %}
        </div>

        <div class="mb-3">
            {{ add_product.description.label(class="form-label") }}
            {{ add_product.description(class="form-control", placeholder="Enter product description") }}
            {% if add_product.description.errors %}
                <div class="text-danger">
                    {{ add_product.description.errors[0] }}
                </div>
            {% endif %}
        </div>

        <div class="mb-3">
            {{ add_product.expiry.label(class="form-label") }}
            {{ add_product.expiry(class="form-control", placeholder="DD/MM/YYYY") }}
            {% if add_product.expiry.errors %}
                <div class="text-danger">
                    {{ add_product.expiry.errors[0] }}
                </div>
            {% endif %}
        </div>

        <div class="mb-3">
            {{ add_product.weight.label(class="form-label") }}
            {{ add_product.weight(class="form-control", placeholder="Enter product weight") }}
            {% if add_product.weight.errors %}
                <div class="text-danger">
                    {{ add_product.weight.errors[0] }}
                </div>
            {% endif %}
        </div>

       {{ add_product.submit(class = "btn w-100 mt-3", style ="background-color: #ff4d6d; color: #fff; border: none; padding: 10px 20px; font-size: 1rem; border-radius: 5px;",autofocus="autofocus") }}
    </form> <!-- Add product form -->
         <button class="btn btn-custom" onclick = "update_action('Default')">Back</button>
     {% elif action == 'ModifyProduct' %}
         <script>
         document.addEventListener('DOMContentLoaded', () => {
             const changeField = document.getElementById('changeField');
             const name = document.getElementsByClassName('name');
             const price = document.getElementsByClassName('price');
             const quantity = document.getElementsByClassName('quantity');
             const categories = document.getElementsByClassName('categories');
             const weight = document.getElementsByClassName('weight');
             const expiry = document.getElementsByClassName('expiry');
             const description = document.getElementsByClassName('description');
             const image = document.getElementsByClassName('image');

            function hideAllCollections(collections) {
        for (const collection of collections) {
            for (const element of collection) {
                element.style.display = 'none';
                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA' || element.tagName === 'SELECT') {
                    element.value = ''; // Reset value for inputs, textareas, and selects
                }
            }

        }
    }

    // All collections to manage
    const allFields = [name, price, quantity, categories, weight, expiry, description, image];

    // Hide all elements first

             function update_change() {
                 switch (changeField.value) {
        case 'name':
            for (const element of name) {
                element.style.display = 'block';

            }

            break;
        case 'price':
            for (const element of price) {
                element.style.display = 'block';
            }
            break;
        case 'quantity':
            for (const element of quantity) {
                element.style.display = 'block';
            }
            break;
        case 'categories':
            for (const element of categories) {
                element.style.display = 'block';
            }
            break;
        case 'weight':
            for (const element of weight) {
                element.style.display = 'block';
            }
            break;
        case 'expiry':
            for (const element of expiry) {
                element.style.display = 'block';
            }
            break;
        case 'description':
            for (const element of description) {
                element.style.display = 'block';
            }
            break;
        case 'imageURL':
            for (const element of image) {
                element.style.display = 'block';
            }
            break;

    }}
             changeField.addEventListener('change', function (){
                 hideAllCollections(allFields);
                 update_change();
             })
         })
         </script>
         <form method = "POST">
         {{ modify_product.hidden_tag() }}
         <div class="mb-3">
             {{ modify_product.product.label(class="form-label") }}
             {{ modify_product.product(class="form-select", placeholder = '') }}


            {{ modify_product.change.label(class="form-label") }}
            {{ modify_product.change(class="form-select", id = "changeField") }}

            {{ modify_product.name.label(class = "form-label name balls" ,style = "display: none") }}
             {{ modify_product.name(class = "form-control nut name", placeholder = "Enter product new name" ,style = "display: none") }}

             {{ modify_product.price.label(class = "form-label price balls" ,style = "display: none") }}
             {{ modify_product.price(class = "form-control nut price", placeholder = "Enter product new price", style = "display: none") }}

             {{ modify_product.quantity.label(class = "form-label quantity balls" ,style = "display: none") }}
             {{ modify_product.quantity(class = "form-control nut quantity", placeholder = "Enter change in quantity" ,style = "display: none") }}

             {{ modify_product.categories.label(class = "form-label categories balls" ,style = "display: none") }}
             {{ modify_product.categories(class = "form-select nut categories" ,style = "display: none", placeholder = '') }}

             {{ modify_product.weight.label(class = "form-label weight balls" ,style = "display: none") }}
             {{ modify_product.weight(class = "form-control nut weight", placeholder = "Enter product new weight" ,style = "display: none") }}

             {{ modify_product.expiry.label(class = "form-label expiry balls" ,style = "display: none") }}
             {{ modify_product.expiry(class = "form-control nut expiry", placeholder = "Enter product new expiry" ,style = "display: none") }}

             {{ modify_product.description.label(class = "form-label description balls" ,style = "display: none") }}
             {{ modify_product.description(class = "form-control nut description", placeholder = "Enter product new description" ,style = "display: none") }}

             {{ modify_product.image_url.label(class = "form-label image balls" ,style = "display: none") }}
             {{ modify_product.image_url(class = "form-control nut image", placeholder = "Enter product new image url" ,style = "display: none") }}

             {{ modify_product.submit(class = "btn w-100 mt-3", style ="background-color: #96d3ff; color: #fff; border: none; padding: 10px 20px; font-size: 1rem; border-radius: 5px;",autofocus="autofocus") }}
             {{ modify_product.delete_submit(class = "btn w-100 mt-3", style ="background-color: #ff1100; color: #fff; border: none; padding: 10px 20px; font-size: 1rem; border-radius: 5px;",autofocus="autofocus") }}
         </div>
         </form>
         <button class="btn btn-custom" onclick = "update_action('Default')">Back</button>
    {% endif %}
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>